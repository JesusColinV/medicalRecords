#: import utils kivy.utils
#: import images_path kivymd.images_path



<TextIn@MDTextField>:
    fill_color: 0, 0, 0, .3
    size_hint_x: 0.5

<ContentNavigationDrawer>:
    ScrollView:
        MDList:

            OneLineAvatarListItem:
                text: "LUZ SM"
                IconLeftWidget:
                    icon: ".\\metadata\\LUZ.ico"

            OneLineListItem:
                text: "Paciente"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scrPacientes"

            OneLineListItem:
                text: "Dashboard"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scrDashboard"

            OneLineListItem:
                text: "Configuración"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "clearScreen"


<Main>:
    MDToolbar:
        id: toolbar
        pos_hint: {"top": 1}
        elevation: 10
        title: "LUZ Software Médico"
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

    MDNavigationLayout:
        x: toolbar.height

        ScreenManager:
            id: screen_manager

            Screen:
                name: "clearScreen"

                MDLabel:
                    text: "Bienvenido Dr."
                    halign: "center"
            Screen:
                name: "scrPacientes"
                #Screen:
                #size= root.width, root.height(2)
                TextIn:
                    id: txtInputSearch
                    hint_text: "Buscar Paciente"
                    fill_color: 0, 0, 0, .3
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    size_hint_x: .5
                    pos_hint: {"x":0.05, "y":0.7}

                MDRaisedButton:
                    text: "Registrar"
                    icon_left: 'pencil-plus-outline'
                    md_bg_color: 0, 0.8, 0 , 0.4
                    pos_hint: {"x":0.85, "y":0.7}
                    on_press:
                        screen_manager.current = "scrRegistro"
                MDRaisedButton:
                    text: "Buscar"
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"x":0.7, "y":0.7}
                    on_press:
                        root.Search()
                MDBoxLayout:
                    id: table_box
                    pos_hint: {"center_x":.5,"top":.5}
                    size_hint: .5,.3
            Screen:
                name: 'scrRegistro'
                #orientation: 'lr-bt'
                #StackLayout:
                RegisterPage:
                    id: registerPage
                    orientation: 'lr-tb'
                    padding: ("80dp","80dp","100dp","600dp")
                    spacing: "100dp","30dp"
                    TextIn:
                        id: txtInputFirstName
                        icon_left: 'card-account-details-outline'
                        hint_text: "Primer Nombre"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.7}
                    TextIn:
                        id: txtInputSecondName
                        icon_left: 'card-account-details-outline'
                        hint_text: "Segundo Nombre"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.6}
                    TextIn:
                        id: txtInputSurName1
                        icon_left: 'card-account-details-outline'
                        hint_text: "Primer Apellido"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.5}
                    TextIn:
                        id: txtInputSurName2
                        icon_left: 'card-account-details-outline'
                        hint_text: "Segundo Apellido"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.4}
                    TextIn:
                        id: txtInputSex
                        hint_text: "Sexo"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    MDRaisedButton:
                        id: InputDate
                        text: "Nacimiento"
                        icon_left: 'calendar-month'
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        on_release: root.show_date_picker()
                    MDLabel:
                        id: txtInputDate
                        text: "Fecha"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                    TextIn:
                        id: txtInputCurp
                        hint_text: "Curp"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputNati
                        hint_text: "Nacionalidad"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputCP
                        hint_text: "Codigo Postal"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.2}
                    TextIn:
                        id: txtInputLoc
                        hint_text: "Localidad"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.2}
                    TextIn:
                        id: txtInputMun
                        hint_text: "Municipio"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.2}
                    TextIn:
                        id: txtInputDir
                        hint_text: "Dirección"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.2}
                    TextIn:
                        id: txtInputPhoneNumber
                        icon_left: 'phone-outline'
                        hint_text: "Telefono"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.7}
                    TextIn:
                        id: txtInputEmail
                        icon_left: "Email"
                        hint_text: "Correo electronico"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.05, "y":0.3}
                    TextIn:
                        id: txtInputfFirstName
                        hint_text: "Nombre del familiar"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputfSecondName
                        hint_text: "Segundo Nombre de Familiar"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputfSurName1
                        hint_text: "Primer Apellido Paterno"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputfSurName2
                        hint_text: "Segundo Apellido Paterno"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}    
                    TextIn:
                        id: txtInputfPhoneNumber
                        hint_text: "Telefono de familiar"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}
                    TextIn:
                        id: txtInputAgObsReg
                        hint_text: "Observaciones"
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.5, "y":0.6}    
                    

                    MDRaisedButton:
                        text: "Regresar"
                        icon_left: 'delete-off'
                        md_bg_color: 0, 0.8, 0 , 0.4
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.85, "y":0.1}
                        on_press:
                            screen_manager.current = "scrPacientes"
                    MDRaisedButton:
                        text: "Guardar"
                        icon_left: 'content-save-all'
                        md_bg_color: 0, 0, 0.8, 0.4
                        size_hint: (None,None)
                        size: (dp(100),dp(100))
                        #pos_hint: {"x":0.7, "y":0.1}
                        on_press:
                            root.Submit()

            Screen:
                name: "scrDashboard"

                MDLabel:
                    text: "Dashboard del mes"
                    halign: "center"
                    
            Screen:
                name: "scrPacient"

                MDLabel:
                    id: LabPatientNom
                    halign: "center"
                    pos_hint: {"center_x": .5, "center_y": .8}
                MDLabel:
                    id: LabPatientID
                    halign: "center"
                    pos_hint: {"center_x": .9, "center_y": .1}
                MDLabel:
                    id: LabPatientSex
                    halign: "center"
                    pos_hint: {"center_x": .5, "center_y": .6}
                MDLabel:
                    id: LabPatientBird
                    halign: "center"
                    pos_hint: {"center_x": .5, "center_y": .5}
                


                MDRaisedButton:
                    text: "Expediente"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .25, "center_y": .6}
                    on_press:
                        screen_manager.current = "scrExpediente"

                MDRaisedButton:
                    text: "Antecedentes"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .75, "center_y": .6}
                    on_press:
                        screen_manager.current = "scrAntecedentes"
                
                MDRaisedButton:
                    text: "Agenda"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .75, "center_y": .4}
                    on_press:
                        screen_manager.current = "scrAgenda"
                
                MDRaisedButton:
                    text: "Consulta"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .25, "center_y": .4}
                    on_press:
                        screen_manager.current = "scrConsulta"
                        root.mk_consultation()

                MDRaisedButton:
                    text: "Regresar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .5, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacientes"

            Screen:
                name: "scrExpediente"
                
                MDLabel:
                    id: LabDateExp
                    text: "Pantalla del paciente"
                    halign: "center"
                    pos_hint: {"center_x": .1, "center_y": .9}

                MDLabel:
                    id: LabInputHeight
                    text: "Altura"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.5, "y":0.8}
                MDLabel:
                    id: LabInputWeight
                    text: "Peso"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.5, "y":0.7}
                MDLabel:
                    id: LabInputTAS
                    text: "Tensis Sistólica"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.8}
                MDLabel:
                    id: LabInputTAD
                    text: "Tension Diastólica"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.7}
                MDLabel:
                    id: LabInputFR
                    text: "Frecuencia Respiratoria"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.6}
                MDLabel:
                    id: LabInputEL
                    text: "Estudio de laboratorio"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.8}    
                MDLabel:
                    id: LabInputEG
                    text: "Estudio de Gabinete"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.7}
                MDLabel:
                    id: LabInputPat
                    text: "Patologia"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.5}
                MDLabel:
                    id: LabInputMed
                    text: "Medicamento"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.3}
                MDLabel:
                    id: LabInputUnit
                    text: "Unidad"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.5, "y":0.3}
                MDLabel:
                    id: LabInputFreq
                    text: "Frecuencia"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.3}
                MDLabel:
                    id: LabInputObs
                    text: "Observaciones"
                    #size_hint: (None,None)
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.2} 

                MDRaisedButton:
                    text: "Consultar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .9, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacientes"

                MDRaisedButton:
                    text: "Regresar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .8, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacient"
            
            Screen:
                name: "scrAntecedentes"

                
                TextIn:
                    id: txtInputPat
                    hint_text: "Patologicos"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.3, "y":0.8}
                TextIn:
                    id: txtInputNPat
                    hint_text: "No patologicos"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.3, "y":0.6}
                TextIn:
                    id: txtInputHere
                    hint_text: "Hereditarios"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.3, "y":0.4}
                TextIn:
                    id: txtInputProc
                    hint_text: "procedimientos"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.7, "y":0.8}
                TextIn:
                    id: txtInputAler
                    hint_text: "Alergias"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.7, "y":0.6}    

                TextIn:
                    id: txtInputMed
                    hint_text: "Medicamento"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.7, "y":0.4}
                
                TextIn:
                    id: txtInputObsAn
                    hint_text: "Observaciones"
                    size_hint: (None,None)
                    size: (dp(100),dp(300))
                    pos_hint: {"x":0.2, "y":0.2} 

                MDRaisedButton:
                    text: "Guardar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .9, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacientes"

                MDRaisedButton:
                    text: "Regresar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .8, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacient"

            Screen:
                name: "scrAgenda"

                TextIn:
                    id: txtInputNatAg
                    hint_text: "Nacionalidad"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.8}
                TextIn:
                    id: txtInputCPAg
                    hint_text: "Código postal"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.4, "y":0.8}
                TextIn:
                    id: txtInputLocAg
                    hint_text: "Localidad"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.6, "y":0.8}
                TextIn:
                    id: txtInputmunAg
                    hint_text: "municipio"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.8}

                TextIn:
                    id: txtInputDireAg
                    hint_text: "Direccion"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.6}
                
                TextIn:
                    id: txtInputTel
                    hint_text: "Telefono"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.4, "y":0.6}
                TextIn:
                    id: txtInputEmailAg
                    hint_text: "correo electronico"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.6, "y":0.6}
                MDLabel:
                    id: texto1
                    text: "Datos del familiar"
                    #size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.5}
                    #halign: "center"
                    #pos_hint: {"center_x": .1, "center_y": .9}
                TextIn:
                    id: txtInputNameFam
                    hint_text: "Nombre"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.4}
                TextIn:
                    id: txtInputsNameFam
                    hint_text: "Segundo Nombre"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.4, "y":0.4}   
                TextIn:
                    id: txtInputSurNameFam
                    hint_text: "Primer Apellido"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.6, "y":0.4}

                TextIn:
                    id: txtInputSecSurNameFam
                    hint_text: "Segundo Apellido"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.4}
                TextIn:
                    id: txtInputPNfam
                    hint_text: "Telefono"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.2, "y":0.2} 
                TextIn:
                    id: txtInputObsAg
                    hint_text: "Observaciones"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.4, "y":0.2} 

                MDRaisedButton:
                    text: "Guardar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .9, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacientes"

                MDRaisedButton:
                    text: "Regresar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .8, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacient"
            
            Screen:
                name: "scrConsulta"

                MDLabel:
                    id: idConsultation
                    text: 'Consulta'
                    halign: "center"
                    pos_hint: {"center_x": .9, "center_y": .1}

                TextIn:
                    id: txtInputHeight
                    hint_text: "Altura"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.1, "y":0.8}
                TextIn:
                    id: txtInputWeight
                    hint_text: "Peso"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.3, "y":0.8}
                TextIn:
                    id: txtInputTAS
                    hint_text: "Tensis Sistólica"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.5, "y":0.8}
                TextIn:
                    id: txtInputTAD
                    hint_text: "Tension Diastólica"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.7, "y":0.8}
                TextIn:
                    id: txtInputFR
                    hint_text: "Frecuencia Respiratoria"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.9, "y":0.8}
                TextIn:
                    id: txtInputEL
                    hint_text: "Estudio de laboratorio"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.1, "y":0.7}    
                TextIn:
                    id: txtInputEG
                    hint_text: "Estudio de Gabinete"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.3, "y":0.7}

                TextIn:
                    id: txtInputPato
                    hint_text: "Patologia"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.7}
                
                
                TextIn:
                    id: txtInputMed
                    hint_text: "Medicamento"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.6}
                
                TextIn:
                    id: txtInputUnit
                    hint_text: "Unidad"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.5}

                TextIn:
                    id: txtInputFreq
                    hint_text: "Frecuencia"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.8, "y":0.4}
                    
                MDRaisedButton:
                    text: "Registrar Medicamento"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .7, "center_y": .5}
                    on_press:
                        root.save_drug()

                MDRaisedButton:
                    text: "Registrar Patologia"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .7, "center_y": .7}
                    on_press:
                        root.save_path()
                
                MDBoxLayout:
                    id: table_box_drugs
                    pos_hint: {"center_x":.3,"top":.7}
                    size_hint: .4,.3
                
                MDBoxLayout:
                    id: table_box_pato
                    pos_hint: {"center_x":.3,"top":.4}
                    size_hint: .4,.3

                TextIn:
                    id: txtInputObsCon
                    hint_text: "Observaciones"
                    size_hint: (None,None)
                    size: (dp(100),dp(100))
                    pos_hint: {"x":0.1, "y":0.1} 

                MDRaisedButton:
                    text: "Guardar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .9, "center_y": .2}
                    on_press:
                        root.Consultation()
                        screen_manager.current = "scrPacientes"

                MDRaisedButton:
                    text: "Regresar"
                    icon_left: 'delete-off'
                    md_bg_color: 0, 0, 0.8, 0.4
                    pos_hint: {"center_x": .8, "center_y": .2}
                    on_press:
                        screen_manager.current = "scrPacient"

        MDNavigationDrawer:
            id: nav_drawer

            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer
